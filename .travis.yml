language: java
jdk: oraclejdk8
services:
- docker
before_install:
- docker run  -d --name rabbit -p 5672:5672 rabbitmq:3.6
install: true
script:
- if [[ $TRAVIS_COMMIT_MESSAGE != 'JENKINS SNAPSHOT UPDATE' ]]; then ./gradlew build
  --info; fi
env:
  global:
  - SPRING_PROFILES_ACTIVE=default,integration-tests
  - secure: iipr2njtOw3ryiASV5I4XVyrBKyU7WDCT1vSeTuYEUO+adZxucNtNYH2enOZHPKJf9SsDJCF56qqDNy7Zjjx6wb6S2cPML0in2ZgSWqZFoOahjN9VBOasG+brG/Ko5ean032Uf37GcAUZirNJFtIiqesj0nGBqsgYfEiVcCW4TSDSBdES5Cnzyy0OCvHIhIucbcWuHKYm0Tx8DDALuXHJ+l+a2COXkMLulavMewQrAgE9XV+NGMR5GNNB9gXW55CPKH0zkRZ1oJ8cS57ax8Etibefeom4X8ReVCy8f3UT53u27PYykBetXVyvOj9aW2sw89tJ5G9187Z/SEVpiYIU/Fu3AGWSx4XJtBlfFTPYOtzuzr81+g9fgBhwJdoEtq3ViPl9C5vWFn7JGTafcovIXOJA2qLocGudo1+XCCXKJcsGKc08zW0KVBlKZVHdF61AwTKxyeRfkkm3yK//yjGbU8Q4DkmywbN068PSO45iW4dNmIg8ym6KuAVD7dKf+uaVMNbjsxKj1B9Ux1WmpiMg2YkUZ4l0CefYcsrSqSf9gRNW9AD2XGgWmtDyRK7B6aHDMsMnasAdK7xqj81QFbo/VIBC8OHzsdWz8Bd97txtqm0yMkGXavt81VWJ67VeiPeoFW2F5EWQrOGlDcq29ieD/dXfZJZ2xa3Yrk94M7qJ+U=
  - secure: PSIQ4IkuM8ueeS9UyNZRgfNWYkFfP04LwG/+GItvB11TUPiYa5Gsc3IszHtdena4FPJKFTTyWBiwAZnXntodPPnoM4dLyN7dM7kXDBBu3ptkYsKV913fGumTBPKFmeP7SBH/jN4KgZgod/9+sRN2voHucPY32GDiqpT+mpZqK1g0CBsnIFKO3DNHE1YuKFRd0iAKHyOLnsrrz2N+4UxvgghNAwdxUjah0lKGVBk5Uzo18BtUDXx305SMVvjJ+9uadIFzu5VMy8XWHuaF9mzHBmGBTT24wzPzrpzYhh3RsyF/R6HhNNXsHery9OOquLskI6Q8z2xn9Uic8uQzB/MaSKesTNaivqcfxvd8BZhCwXEBJ9pxEgh0qYMOndkGhLCFvBnV+4CA5h7C+I5V1YhT/rNE0QJ1T1qUFVRM94UH/GZidPWsEq6QAUInqMKEoBlhCoVns/obVeV1mRcV1WSgpznbgXoJHHuw0A4dmAFVio/EpAGXanDbCzk8PKMYwfiKDaFU1Ue0tVinYdqgfxZkNSS6URVKGC+QHCckph2NxWCjOkMfw1E1mzgiI7CkSnnX5vclYCsmjwK8+2Dau+qdptjPf3XcEGcOqgnTzWLtQ1geBzwdyImxCOHYRxpBcVeZybc4uLFY7CjwbX3zA8rCh0SFi5mcZ9lgj8lN7aSecug=
  - secure: SFcCLgFNJbPSHk5JqoNg7NCPvX0w0pf72l/Bder3MviJ1OZK96zQG0EDytWPkYm6jWVhtiPFnk8Gnyt/xVXWGAH18Kz0o+z4gattrfY2VTL7I/1iabpIAx1yMLiTEz6XG33W5TUAuQDQVBjvNk0uKkSItxn0ks700N2j0OLWFga6Dpk9eFPq2+WNrFHVS1fKu2sD/mdxb41A+AUtz0GgmNMmTmaXqP4vqqxRmHBaNuQIDubq/6syXnfo1l1RgIrR41S9NlCAOiiCU/ko9DTIZf4NRjeg5XYuVeKCPz49QZ+knE3xFCcFnUU8IpkED1wxohbNdlXC3bwixh8UqzfyaJUsYpFO8B/0a5qtkjbyT585EKOkvjNSG82XIdpoHmvwTcs1WLUub1ZphpeUuv+xIdMcIuyuMJp/DAeZ9XXGOpONBZqMJKXvTMWQPA2MF5/eWYl1vsQQB5tlkaNGnl134tUsCQMtJqqzBP5FjoFKHutXTb1VcEwQ8grbsTEynkwTYJ59qGeGaxVOTCaiNbQym0Rja1KPyxsqUdXmnyDsGvql0+DV3zI+pNETOqjmec5sYh4SIIu4PAu+Ze0grRAz+Grqd0+mjJiTIIPtVb3thND6t5+pJurkH97qoJo+e8IglvpHnd6hrZTZPLQEPxnSvudt1DjnokfYw3DCVtcy4x0=
  - secure: IGOp8mTE9ancE7GGun/skxiGC4PP0ug39ADVDGtNv+WbMu6xTxjjqdE3x13Fyt/ApdyZz/2lex18FUdwyBZRM7ietiJlsnxQaCUCBDnqiUpCML97h9RIPhVHVAA2QOcBS5HIAIlNWohOaDyPM39xwl/pyOQMFWaQXkfU1oVgKhcQlvZ00DgesYJfOe83Z9XeacFXTNqlyJN0jHu7hj7kDcds6EeWWJqdBujF9hKpiAv1gXRWEhjh74Gt8++wWNgrlDm5q+2tBM3I1Q9zyzRcwrXafxXCVzOkCLl6P1bOga2oOXC1BFzvrSiaA+yJvL8KPVD4MdND+kqavxlmlBVSPtjU+HccP2CAHZKgThDrTfehbYpaTFedRFNSTBaSM25A0ZPdDB4C4Ap+yUEciTfhoED8Fy8h//DdZbMX2ha80jFathT5MiOwBGrVpsQfJjzo+/N+cmBB5D729/h7qnKqR3iHdyYFqbOokZEbWujfraJV02Icn4cNZY4IOJ2AJ2nvF6nQaVCZ/+hlrO2Npgv4jJEe0N9FnEetPo5LEZOYJq8vL2oReOy1LoKN6GoHVxjMeYkpDsBLQw3YSHL4lJMilnkwcCa4BZQgMqgCaHvvxyQN4B9nD6nIzleSQn4MYlI8O6NaGm13xf+CuISJXzbfqXKIaB78Vp2UxvczKIzjVcU=
  - secure: QCp52R5ihQvecXifsbZRZTKPC1xJFsOJFuqVMntuIW7S0/i+JWVECxRwcCHKpc2h2iUjWj+ArYXSPS6sEuoaVbU7oFtZOMlAqTJPApcMelSVmz6J7YnGPUtAQ//XyEQY7jyZ3uZgmIE9DkIM3lH9njwACxM1RYEyootTL/hW45OnrSWb076U3Q51aBKFA1EhDgTiWiJc/xK2R4LMvSVUGcBmL9XoRith4uSuPDBI2hCyKZYeQpohuSKtArxX1aB+tlf7T8cAxR8PJX2/FS9LxyJmBJq5VXV16zntgxYmM4w4Q2u1lcHyYJkh7+eyDh7xevrTbxG2bWwXFowV1vx1MgR2dNKU/xIQVMOp4f3/WiTjUiGcrBFTSWffp+/lpXr/p45Kcj/uppEuaY+ml4A38wt6RKqafIEQCaAXzxWkcnamSg2VJ9cYLiCDsgCNsjWZPjSgtleHfxLij2b/LdVB3lfUPovACQkqdEE/MhOVfYjR7mJzXb+nr4PfhUoC46Ca4+zIpPZ7vZaglfMtIzneMqV3UUwnR+KXjAsvj+3loh6KQM3HCaZdBS7nCP3LThJ68zGXN2q+4YhJdq98HTlxGgzuO9OhZnFCzQbVa79+mW2i90BjnlW3fP9ehVacwNZWrjXgA2ccddCFIwFemBNyTvr4d03TF8Gh3A2tfyytrmE=
branches:
  only:
  - master
notifications:
  slack:
    secure: qv9PEK9fWuKJpeTabAvgMM1/I7NO2IsexfpYVNh/ZfbikOku5xAU6KJoepYOByB2Xd5/aLGM8NXmEt5LH19LHSKzNeb5JqoFU2OCkXV93U5WXPV175isUzABfJC7N/ZKb2m9tWc6Rjp+WEEBH736WgrqMGdmELO2VEcEOukSa+IszOGhn5RhQLMLuzrkW2JdmWBVnIHStotGa7By+hxEqRgUNhVaiHj1y7fDtctPjfGklMbETOy6CuqRT7DeGwi0u6PWZs3mIuRzRVfsw/3nuU1axA8+sSEd2z0i8c3nELtZ1RH7Si+D9aQ7TEkVNJFcE2zcpMAi+5QKxoO4xu/RR7XNpIXHZfGl3kotbLtZGkL/kpTs1g6eZAlwOX0WtgyXnnRvH3YxE9ROGaTin9bWBMarFxavHJbMO8qwXrXLRafEPT437GxcNL7UaAdCM/ELRnelDIhnbC1fmeSkHfN9W1wdHWyi8xuaANJtsXVPPmBYDmByU5l7hsLwgyiv7fUDGNfxSXJf7QOZKLEKTYEpea3F6fbWzyKCv6S0MJWM7v7o/pG4T82DKCXWWOfQppFnwe0fNYJmXWGgT1/hmTZzhiPeGm0O83AA6gP5vT+k1zKxKXvvjI6Ohh5aA2BpESkxEhGGCvkzLCeQXo3VeSu4SOgMaPYT/TGc9Emnd4CQjbo=
after_success:
- if [[ "$TRAVIS_BRANCH" = "master" ]] && [[ "$TRAVIS_PULL_REQUEST" = "false" ]] &&
  [[ $TRAVIS_COMMIT_MESSAGE != "JENKINS SNAPSHOT UPDATE" ]]; then echo "$DOCKER_PASSWORD"
  | docker login --username "$DOCKER_USERNAME" --password-stdin; docker build -t fwmtjobsvcv2
  --build-arg jar=build/libs/fwmt-job-service-v2-*.jar .; docker tag fwmtjobsvcv2
  sdcplatform/fwmtjobsvcv2:job-service-$TRAVIS_BUILD_NUMBER; docker push sdcplatform/fwmtjobsvcv2;
  ./gradlew artifactPublish; fi
